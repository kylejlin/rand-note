(this["webpackJsonprand-note"]=this["webpackJsonprand-note"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a,r=n(2),i=n.n(r),s=n(5),c=n.n(s),o=n(3),l=n(1),h=n(6),u=n(7),p=n(9),g=n(8);n(14);!function(e){e.ReflexiveOnly="ReflexiveOnly",e.ByPitch="ByPitch",e.ByLetter="ByLetter"}(a||(a={}));var f,d={naturalsOnly:!0,allowRepeats:!1,equivalenceRelation:a.ReflexiveOnly};!function(e){e[e.A=0]="A",e[e.ASharp=1]="ASharp",e[e.BFlat=2]="BFlat",e[e.B=3]="B",e[e.C=4]="C",e[e.CSharp=5]="CSharp",e[e.DFlat=6]="DFlat",e[e.D=7]="D",e[e.DSharp=8]="DSharp",e[e.EFlat=9]="EFlat",e[e.E=10]="E",e[e.F=11]="F",e[e.FSharp=12]="FSharp",e[e.GFlat=13]="GFlat",e[e.G=14]="G",e[e.GSharp=15]="GSharp",e[e.AFlat=16]="AFlat"}(f||(f={}));var S,v=[f.A,f.ASharp,f.BFlat,f.B,f.C,f.CSharp,f.DFlat,f.D,f.DSharp,f.EFlat,f.E,f.F,f.FSharp,f.GFlat,f.G,f.GSharp,f.AFlat];!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G"}(S||(S={}));var y,C;S.A,S.B,S.C,S.D,S.E,S.F,S.G;function F(e){switch(e){case f.A:case f.ASharp:case f.AFlat:return S.A;case f.B:case f.BFlat:return S.B;case f.C:case f.CSharp:return S.C;case f.DFlat:case f.D:case f.DSharp:return S.D;case f.EFlat:case f.E:return S.E;case f.F:case f.FSharp:return S.F;case f.GFlat:case f.G:case f.GSharp:return S.G}}function b(e){switch(e){case f.A:case f.B:case f.C:case f.D:case f.E:case f.F:case f.G:return y.None;case f.ASharp:case f.CSharp:case f.DSharp:case f.FSharp:case f.GSharp:return y.Sharp;case f.AFlat:case f.BFlat:case f.DFlat:case f.EFlat:case f.GFlat:return y.Flat}}function j(e){switch(e){case f.AFlat:return f.GSharp;case f.ASharp:return f.BFlat;case f.BFlat:return f.ASharp;case f.CSharp:return f.DFlat;case f.DFlat:return f.CSharp;case f.DSharp:return f.EFlat;case f.EFlat:return f.DSharp;case f.FSharp:return f.GFlat;case f.GFlat:return f.FSharp;case f.GSharp:return f.AFlat;case f.A:case f.B:case f.C:case f.D:case f.E:case f.F:case f.G:return e}}function O(e,t){switch(t){case a.ReflexiveOnly:return k(e);case a.ByPitch:var n=j(e);return n===e?k(e):k(e)+"/"+k(n);case a.ByLetter:var r=F(e),i=function(e){switch(e){case S.A:return f.ASharp;case S.B:return;case S.C:return f.CSharp;case S.D:return f.DSharp;case S.E:return;case S.F:return f.FSharp;case S.G:return f.GSharp}}(r),s=function(e){switch(e){case S.A:return f.AFlat;case S.B:return f.BFlat;case S.C:return;case S.D:return f.DFlat;case S.E:return f.EFlat;case S.F:return;case S.G:return f.GFlat}}(r);return N(r)+(void 0===i?"":"/"+k(i))+(void 0===s?"":"/"+k(s))}}function k(e){return N(F(e))+function(e){switch(e){case y.None:return"";case y.Sharp:return"\u266f";case y.Flat:return"\u266d"}}(b(e))}function N(e){return S[e]}function w(e,t){var n,a=A(e,t);return 0===(n=a).length?void 0:n[Math.floor(Math.random()*n.length)]}function A(e,t){var n=v.slice();return t.naturalsOnly&&(n=n.filter((function(e){return b(e)===y.None}))),t.allowRepeats?n:n.filter((function(n){return!e.some((function(e){return function(e,t,n){switch(e){case a.ReflexiveOnly:return t===n;case a.ByPitch:return t===n||t===j(n);case a.ByLetter:return F(t)===F(n)}}(t.equivalenceRelation,n,e)}))}))}function B(){var e,t=localStorage.getItem(C.Settings);if(null===t)return d;try{var n=JSON.parse(t);if("object"===typeof(e=n)&&null!==e&&"boolean"===typeof e.naturalsOnly&&"boolean"===typeof e.allowRepeats&&"number"===typeof e.equivalenceRelation&&e.equivalenceRelation in a)return n}catch(r){}return d}function x(){var e,t=localStorage.getItem(C.NoteHistory);if(null===t)return[];try{var n=JSON.parse(t);if(e=n,Array.isArray(e)&&e.every(R))return n}catch(a){}return[]}function R(e){return"number"===typeof f[e]}function D(e){var t=JSON.stringify(e);localStorage.setItem(C.NoteHistory,t)}!function(e){e[e.None=0]="None",e[e.Sharp=1]="Sharp",e[e.Flat=2]="Flat"}(y||(y={})),function(e){e.Settings="RandNote.Settings",e.NoteHistory="RandNote.NoteHistory"}(C||(C={}));var E=n(0),G=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).state={isSettingsOpen:!1,settings:B(),history:x()},a.bindMethods(),a}return Object(u.a)(n,[{key:"bindMethods",value:function(){this.onCloseSettingsClick=this.onCloseSettingsClick.bind(this),this.onNaturalsOnlyChange=this.onNaturalsOnlyChange.bind(this),this.onAllowRepeatsChange=this.onAllowRepeatsChange.bind(this),this.onNoteEquivalenceRelationChange=this.onNoteEquivalenceRelationChange.bind(this),this.onOpenSettingsClick=this.onOpenSettingsClick.bind(this),this.onClearHistoryClick=this.onClearHistoryClick.bind(this),this.onNoteScreenClick=this.onNoteScreenClick.bind(this)}},{key:"render",value:function(){return this.state.isSettingsOpen?this.renderSettingsPage():this.renderNotePage()}},{key:"renderSettingsPage",value:function(){return Object(E.jsxs)("div",{className:"App",children:[Object(E.jsx)("section",{children:Object(E.jsx)("button",{onClick:this.onCloseSettingsClick,children:"Close"})}),Object(E.jsxs)("section",{className:"Settings",children:[Object(E.jsxs)("label",{className:"Setting",children:[Object(E.jsx)("input",{type:"checkbox",checked:this.state.settings.naturalsOnly,onChange:this.onNaturalsOnlyChange}),"Naturals only"]}),Object(E.jsxs)("label",{className:"Setting",children:[Object(E.jsx)("input",{type:"checkbox",checked:this.state.settings.allowRepeats,onChange:this.onAllowRepeatsChange}),"Allow repeats"]}),Object(E.jsxs)("label",{className:"Setting",children:[Object(E.jsxs)("select",{value:this.state.settings.equivalenceRelation,onChange:this.onNoteEquivalenceRelationChange,children:[Object(E.jsx)("option",{value:a.ReflexiveOnly,children:"Reflexive only"}),Object(E.jsx)("option",{value:a.ByPitch,children:"By pitch"}),Object(E.jsx)("option",{value:a.ByLetter,children:"By letter"})]}),"Note equivalence relation"]})]})]})}},{key:"onCloseSettingsClick",value:function(){this.setState({isSettingsOpen:!1})}},{key:"onNaturalsOnlyChange",value:function(e){this.updateSetting("naturalsOnly",e.target.checked)}},{key:"onAllowRepeatsChange",value:function(e){this.updateSetting("allowRepeats",e.target.checked)}},{key:"onNoteEquivalenceRelationChange",value:function(e){var t=parseInt(e.target.value,10);t in a&&this.updateSetting("equivalenceRelation",t)}},{key:"updateSetting",value:function(e,t){this.setState((function(n){var a=Object(l.a)(Object(l.a)({},n.settings),{},Object(o.a)({},e,t));return function(e){var t=JSON.stringify(e);localStorage.setItem(C.Settings,t)}(a),Object(l.a)(Object(l.a)({},n),{},{settings:a})}))}},{key:"renderNotePage",value:function(){var e=this.state.history[this.state.history.length-1],t=this.state.settings.equivalenceRelation;return Object(E.jsxs)("div",{className:"App"+(0===A(this.state.history,this.state.settings).length?" LastNote":""),onClick:this.onNoteScreenClick,children:[Object(E.jsxs)("section",{children:[Object(E.jsx)("button",{onClick:this.onOpenSettingsClick,children:"Settings"}),Object(E.jsx)("button",{onClick:this.onClearHistoryClick,children:"Reset"})]}),Object(E.jsxs)("section",{children:[Object(E.jsx)("h2",{children:"Current note"}),void 0!==e?Object(E.jsx)("div",{className:"CurrentNote",children:O(e,t)}):Object(E.jsx)("div",{children:"Tap to generate"})]}),Object(E.jsx)("section",{children:this.state.history.map((function(e){return Object(E.jsx)("div",{className:"HistoryNote",children:O(e,t)})}))})]})}},{key:"onOpenSettingsClick",value:function(){this.setState({isSettingsOpen:!0})}},{key:"onClearHistoryClick",value:function(){this.setState({history:[]}),D([])}},{key:"onNoteScreenClick",value:function(e){e.target instanceof HTMLButtonElement||this.setState((function(e){var t=w(e.history,e.settings),n=void 0===t?e.history:e.history.concat([t]);return D(n),Object(l.a)(Object(l.a)({},e),{},{history:n})}))}}]),n}(i.a.Component),m=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function P(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(E.jsx)(i.a.StrictMode,{children:Object(E.jsx)(G,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");m?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):P(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):P(t,e)}))}}(),q()}},[[16,1,2]]]);
//# sourceMappingURL=main.c75edff9.chunk.js.map