{"version":3,"sources":["businessLogic.ts","persistentState.ts","serde.ts","components/BorderedFittedSection.tsx","components/IndentedSection.tsx","App.tsx","serviceWorkerRegistration.ts","reportWebVitals.ts","index.tsx"],"names":["NoteNameEquivalenceRelation","NoteDisplayStyle","Pitch","NoteName","ALL_PITCHES","E2","F2","FG2","G2","GA2","A2","AB2","B2","C3","CD3","D3","DE3","E3","F3","FG3","G3","GA3","A3","AB3","B3","C4","CD4","D4","DE4","E4","F4","FG4","G4","GA4","A4","AB4","B4","C5","CD5","D5","DE5","E5","F5","FG5","G5","GA5","A5","AB5","B5","C6","CD6","D6","DE6","E6","DEFAULT_SETTINGS","naturalsOnly","allowRepeats","equivalenceRelation","nameEqRel","ByLetter","isOctaveSensitive","displayEquivalentNoteNames","displayOctave","sampleDisplayStyle","StaffAndLetters","minPitch","maxPitch","Natural","ALL_NOTES","f","xs","ys","out","Array","length","k","i","j","cartesianProduct","note","pitch","name","A","ASharp","BFlat","B","C","CSharp","DFlat","D","DSharp","EFlat","E","F","FSharp","GFlat","G","GSharp","AFlat","filter","sample","pitchToNoteNames","includes","Modification","LocalStorageKey","natural","modification","None","Sharp","Flat","alternativeName","nameStrings","displayEquivalentNotes","nameString","Reflexive","ByPitch","alt","nat","sharp","sharpOfNatural","flat","flatOfNatural","naturalToNote","isNotUndefined","sort","a","b","Infinity","scoreSuchThatNatLtSharpLtFlat","map","join","mod","modificationString","v","undefined","getRandomNote","prev","settings","arr","possibleNextNotes","getPossibleRandomNextNotes","Math","floor","random","possible","slice","isLowerThanOrEqualTo","possibleSample","some","prevSample","rel","getOctave","areNoteNamesEqualAccordingTo","x","y","getNotationWithoutLetters","samples","getNotation","notes","displayLetters","lettersNotationOrEmptyString","noteAbcNotation","n","src","push","insertXEveryN","noteNameAbcNotation","pitchAbcNotation","deserializeSettings","s","parsed","JSON","parse","isValidEquivalenceRelation","deserializeNoteHistory","isArray","every","isSample","isNote","isPitch","loadSettings","localStorage","getItem","Settings","possiblyUndefinedSettings","saveSettings","setItem","stringify","serializeSettings","loadNoteHistory","NoteHistory","possiblyUndefinedNoteHistory","saveNoteHistory","history","BorderedFittedSection","children","className","IndentedSection","App","props","state","isSettingsOpen","bindMethods","this","onCloseSettingsClick","bind","onNaturalsOnlyChange","onAllowRepeatsChange","onNoteDisplayStyleChange","onEqRelIsOctaveSensitiveChange","onEqRelNameEqRelChange","onDisplayEquivalentNoteNamesChange","onDisplayOctaveChange","onMinPitchChange","onMaxPitchChange","onOpenSettingsClick","onClearHistoryClick","onNoteScreenClick","renderSettingsPage","renderNotePage","onClick","type","checked","onChange","value","Letters","Staff","min","max","setState","event","updateSetting","target","parseInt","prevState","newSettings","preventDefault","setting","currentNote","notation","HTMLButtonElement","newHistory","concat","React","Component","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","URL","process","href","origin","addEventListener","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.2b19557a.chunk.js","sourcesContent":["export interface State {\n  isSettingsOpen: boolean;\n  settings: Settings;\n  history: Note[];\n}\n\nexport interface Settings {\n  naturalsOnly: boolean;\n  allowRepeats: boolean;\n  equivalenceRelation: NoteEquivalenceRelation;\n  displayEquivalentNoteNames: boolean;\n  displayOctave: boolean;\n  sampleDisplayStyle: NoteDisplayStyle;\n  minPitch: Pitch;\n  maxPitch: Pitch;\n}\n\nexport interface NoteEquivalenceRelation {\n  nameEqRel: NoteNameEquivalenceRelation;\n  isOctaveSensitive: boolean;\n}\n\nexport enum NoteNameEquivalenceRelation {\n  Reflexive,\n  ByPitch,\n  ByLetter,\n}\n\nexport enum NoteDisplayStyle {\n  Letters,\n  Staff,\n  StaffAndLetters,\n}\n\n/**\n * Flats and sharps are named based on the natural\n * notes that they're between.\n * For example, both A Sharp 2 and B Flat 2 are\n * represented by `AB2`.\n *\n * The numeric values assigned to this enum's variants\n * are guaranteed to be assigned such that lower pitches\n * have smaller numbers than higher pitches.\n */\nexport enum Pitch {\n  E2,\n  F2,\n  FG2,\n  G2,\n  GA2,\n  A2,\n  AB2,\n  B2,\n  C3,\n  CD3,\n  D3,\n  DE3,\n  E3,\n  F3,\n  FG3,\n  G3,\n  GA3,\n  A3,\n  AB3,\n  B3,\n  C4,\n  CD4,\n  D4,\n  DE4,\n  E4,\n  F4,\n  FG4,\n  G4,\n  GA4,\n  A4,\n  AB4,\n  B4,\n  C5,\n  CD5,\n  D5,\n  DE5,\n  E5,\n  F5,\n  FG5,\n  G5,\n  GA5,\n  A5,\n  AB5,\n  B5,\n  C6,\n  CD6,\n  D6,\n  DE6,\n  E6,\n}\n\nconst ALL_PITCHES: readonly Pitch[] = [\n  Pitch.E2,\n  Pitch.F2,\n  Pitch.FG2,\n  Pitch.G2,\n  Pitch.GA2,\n  Pitch.A2,\n  Pitch.AB2,\n  Pitch.B2,\n  Pitch.C3,\n  Pitch.CD3,\n  Pitch.D3,\n  Pitch.DE3,\n  Pitch.E3,\n  Pitch.F3,\n  Pitch.FG3,\n  Pitch.G3,\n  Pitch.GA3,\n  Pitch.A3,\n  Pitch.AB3,\n  Pitch.B3,\n  Pitch.C4,\n  Pitch.CD4,\n  Pitch.D4,\n  Pitch.DE4,\n  Pitch.E4,\n  Pitch.F4,\n  Pitch.FG4,\n  Pitch.G4,\n  Pitch.GA4,\n  Pitch.A4,\n  Pitch.AB4,\n  Pitch.B4,\n  Pitch.C5,\n  Pitch.CD5,\n  Pitch.D5,\n  Pitch.DE5,\n  Pitch.E5,\n  Pitch.F5,\n  Pitch.FG5,\n  Pitch.G5,\n  Pitch.GA5,\n  Pitch.A5,\n  Pitch.AB5,\n  Pitch.B5,\n  Pitch.C6,\n  Pitch.CD6,\n  Pitch.D6,\n  Pitch.DE6,\n  Pitch.E6,\n];\n\nexport const DEFAULT_SETTINGS: Settings = {\n  naturalsOnly: true,\n  allowRepeats: false,\n  equivalenceRelation: {\n    nameEqRel: NoteNameEquivalenceRelation.ByLetter,\n    isOctaveSensitive: false,\n  },\n  displayEquivalentNoteNames: false,\n  displayOctave: true,\n  sampleDisplayStyle: NoteDisplayStyle.StaffAndLetters,\n  minPitch: Pitch.E2,\n  maxPitch: Pitch.E5,\n};\n\nexport interface Note {\n  name: NoteName;\n  pitch: Pitch;\n}\n\nexport enum NoteName {\n  A,\n  ASharp,\n  BFlat,\n  B,\n  C,\n  CSharp,\n  DFlat,\n  D,\n  DSharp,\n  EFlat,\n  E,\n  F,\n  FSharp,\n  GFlat,\n  G,\n  GSharp,\n  AFlat,\n}\n\nconst ALL_NOTE_NAMES: readonly NoteName[] = [\n  NoteName.A,\n  NoteName.ASharp,\n  NoteName.BFlat,\n  NoteName.B,\n  NoteName.C,\n  NoteName.CSharp,\n  NoteName.DFlat,\n  NoteName.D,\n  NoteName.DSharp,\n  NoteName.EFlat,\n  NoteName.E,\n  NoteName.F,\n  NoteName.FSharp,\n  NoteName.GFlat,\n  NoteName.G,\n  NoteName.GSharp,\n  NoteName.AFlat,\n];\n\nexport const ALL_NOTES: readonly Note[] = cartesianProduct(\n  buildSample,\n  ALL_NOTE_NAMES,\n  ALL_PITCHES\n)\n  // We can't simply define the set of all notes as the Cartesian product,\n  // since that would include some nonsensical samples (e.g., `{ note: NoteName.A, pitch: Pitch.C2 }`).\n  // Instead, we only include samples that have names that agree with their pitch.\n  .filter((sample) => pitchToNoteNames(sample.pitch).includes(sample.name));\n\nfunction cartesianProduct<T, U, R>(\n  f: (x: T, y: U) => R,\n  xs: readonly T[],\n  ys: readonly U[]\n): R[] {\n  const out = new Array(xs.length * ys.length);\n  let k = 0;\n\n  for (let i = 0; i < xs.length; ++i) {\n    for (let j = 0; j < ys.length; ++j) {\n      out[k] = f(xs[i], ys[j]);\n      ++k;\n    }\n  }\n\n  return out;\n}\n\nfunction buildSample(note: NoteName, pitch: Pitch): Note {\n  return { name: note, pitch };\n}\n\nexport function pitchToNoteNames(pitch: Pitch): NoteName[] {\n  switch (pitch) {\n    case Pitch.E2:\n      return [NoteName.E];\n    case Pitch.F2:\n      return [NoteName.F];\n    case Pitch.FG2:\n      return [NoteName.FSharp, NoteName.GFlat];\n    case Pitch.G2:\n      return [NoteName.G];\n    case Pitch.GA2:\n      return [NoteName.GSharp, NoteName.AFlat];\n    case Pitch.A2:\n      return [NoteName.A];\n    case Pitch.AB2:\n      return [NoteName.ASharp, NoteName.BFlat];\n    case Pitch.B2:\n      return [NoteName.B];\n    case Pitch.C3:\n      return [NoteName.C];\n    case Pitch.CD3:\n      return [NoteName.CSharp, NoteName.DFlat];\n    case Pitch.D3:\n      return [NoteName.D];\n    case Pitch.DE3:\n      return [NoteName.DSharp, NoteName.EFlat];\n    case Pitch.E3:\n      return [NoteName.E];\n    case Pitch.F3:\n      return [NoteName.F];\n    case Pitch.FG3:\n      return [NoteName.FSharp, NoteName.GFlat];\n    case Pitch.G3:\n      return [NoteName.G];\n    case Pitch.GA3:\n      return [NoteName.GSharp, NoteName.AFlat];\n    case Pitch.A3:\n      return [NoteName.A];\n    case Pitch.AB3:\n      return [NoteName.ASharp, NoteName.BFlat];\n    case Pitch.B3:\n      return [NoteName.B];\n    case Pitch.C4:\n      return [NoteName.C];\n    case Pitch.CD4:\n      return [NoteName.CSharp, NoteName.DFlat];\n    case Pitch.D4:\n      return [NoteName.D];\n    case Pitch.DE4:\n      return [NoteName.DSharp, NoteName.EFlat];\n    case Pitch.E4:\n      return [NoteName.E];\n    case Pitch.F4:\n      return [NoteName.F];\n    case Pitch.FG4:\n      return [NoteName.FSharp, NoteName.GFlat];\n    case Pitch.G4:\n      return [NoteName.G];\n    case Pitch.GA4:\n      return [NoteName.GSharp, NoteName.AFlat];\n    case Pitch.A4:\n      return [NoteName.A];\n    case Pitch.AB4:\n      return [NoteName.ASharp, NoteName.BFlat];\n    case Pitch.B4:\n      return [NoteName.B];\n    case Pitch.C5:\n      return [NoteName.C];\n    case Pitch.CD5:\n      return [NoteName.CSharp, NoteName.DFlat];\n    case Pitch.D5:\n      return [NoteName.D];\n    case Pitch.DE5:\n      return [NoteName.DSharp, NoteName.EFlat];\n    case Pitch.E5:\n      return [NoteName.E];\n    case Pitch.F5:\n      return [NoteName.F];\n    case Pitch.FG5:\n      return [NoteName.FSharp, NoteName.GFlat];\n    case Pitch.G5:\n      return [NoteName.G];\n    case Pitch.GA5:\n      return [NoteName.GSharp, NoteName.AFlat];\n    case Pitch.A5:\n      return [NoteName.A];\n    case Pitch.AB5:\n      return [NoteName.ASharp, NoteName.BFlat];\n    case Pitch.B5:\n      return [NoteName.B];\n    case Pitch.C6:\n      return [NoteName.C];\n    case Pitch.CD6:\n      return [NoteName.CSharp, NoteName.DFlat];\n    case Pitch.D6:\n      return [NoteName.D];\n    case Pitch.DE6:\n      return [NoteName.DSharp, NoteName.EFlat];\n    case Pitch.E6:\n      return [NoteName.E];\n  }\n}\n\nexport enum Natural {\n  A,\n  B,\n  C,\n  D,\n  E,\n  F,\n  G,\n}\n\nexport const ALL_NATURALS: readonly Natural[] = [\n  Natural.A,\n  Natural.B,\n  Natural.C,\n  Natural.D,\n  Natural.E,\n  Natural.F,\n  Natural.G,\n];\n\nexport enum Modification {\n  None,\n  Sharp,\n  Flat,\n}\n\nexport function natural(name: NoteName): Natural {\n  switch (name) {\n    case NoteName.A:\n      return Natural.A;\n    case NoteName.ASharp:\n      return Natural.A;\n    case NoteName.AFlat:\n      return Natural.A;\n\n    case NoteName.B:\n      return Natural.B;\n    case NoteName.BFlat:\n      return Natural.B;\n\n    case NoteName.C:\n      return Natural.C;\n    case NoteName.CSharp:\n      return Natural.C;\n\n    case NoteName.DFlat:\n      return Natural.D;\n    case NoteName.D:\n      return Natural.D;\n    case NoteName.DSharp:\n      return Natural.D;\n\n    case NoteName.EFlat:\n      return Natural.E;\n    case NoteName.E:\n      return Natural.E;\n\n    case NoteName.F:\n      return Natural.F;\n    case NoteName.FSharp:\n      return Natural.F;\n\n    case NoteName.GFlat:\n      return Natural.G;\n    case NoteName.G:\n      return Natural.G;\n    case NoteName.GSharp:\n      return Natural.G;\n  }\n}\n\nexport function modification(name: NoteName): Modification {\n  switch (name) {\n    case NoteName.A:\n    case NoteName.B:\n    case NoteName.C:\n    case NoteName.D:\n    case NoteName.E:\n    case NoteName.F:\n    case NoteName.G:\n      return Modification.None;\n\n    case NoteName.ASharp:\n    case NoteName.CSharp:\n    case NoteName.DSharp:\n    case NoteName.FSharp:\n    case NoteName.GSharp:\n      return Modification.Sharp;\n\n    case NoteName.AFlat:\n    case NoteName.BFlat:\n    case NoteName.DFlat:\n    case NoteName.EFlat:\n    case NoteName.GFlat:\n      return Modification.Flat;\n  }\n}\n\n/**\n  * Non-natural notes have two names (e.g., C sharp and D flat).\n  * If the provided note is not natural, the other name will be returned.\n  * If it is natural, the original note will be returned.\n\n  * ## Example\n  * ```typescript\n  * assert(NoteName.DFlat === alternativeName(NoteName.CSharp));\n  * assert(NoteName.C === alternativeName(NoteName.C));\n  * ```\n  */\nexport function alternativeName(name: NoteName): NoteName {\n  switch (name) {\n    case NoteName.AFlat:\n      return NoteName.GSharp;\n    case NoteName.ASharp:\n      return NoteName.BFlat;\n\n    case NoteName.BFlat:\n      return NoteName.ASharp;\n\n    case NoteName.CSharp:\n      return NoteName.DFlat;\n\n    case NoteName.DFlat:\n      return NoteName.CSharp;\n    case NoteName.DSharp:\n      return NoteName.EFlat;\n\n    case NoteName.EFlat:\n      return NoteName.DSharp;\n\n    case NoteName.FSharp:\n      return NoteName.GFlat;\n\n    case NoteName.GFlat:\n      return NoteName.FSharp;\n    case NoteName.GSharp:\n      return NoteName.AFlat;\n\n    case NoteName.A:\n    case NoteName.B:\n    case NoteName.C:\n    case NoteName.D:\n    case NoteName.E:\n    case NoteName.F:\n    case NoteName.G:\n      return name;\n  }\n}\n\nexport function nameStrings(\n  name: NoteName,\n  equivalenceRelation: NoteNameEquivalenceRelation,\n  displayEquivalentNotes: boolean\n): string {\n  if (!displayEquivalentNotes) {\n    return nameString(name);\n  }\n\n  /**\n   * To clarify:\n   * The name is \"Compare such that [original, nat, sharp, flat]\n   * is ascending\".\n   */\n  function compareSuchThatOriginalNatSharpFlatIsAscending(\n    a: NoteName,\n    b: NoteName\n  ): number {\n    if (a === name) {\n      return -Infinity;\n    } else if (b === name) {\n      return Infinity;\n    } else {\n      const aScore = scoreSuchThatNatLtSharpLtFlat(a);\n      const bScore = scoreSuchThatNatLtSharpLtFlat(b);\n      return aScore - bScore;\n    }\n  }\n\n  switch (equivalenceRelation) {\n    case NoteNameEquivalenceRelation.Reflexive:\n      return nameString(name);\n    case NoteNameEquivalenceRelation.ByPitch: {\n      const alt = alternativeName(name);\n      if (alt === name) {\n        return nameString(name);\n      } else {\n        return nameString(name) + \"/\" + nameString(alt);\n      }\n    }\n    case NoteNameEquivalenceRelation.ByLetter: {\n      const nat = natural(name);\n      const sharp = sharpOfNatural(nat);\n      const flat = flatOfNatural(nat);\n      const notes = [naturalToNote(nat), sharp, flat]\n        .filter(isNotUndefined)\n        .sort(compareSuchThatOriginalNatSharpFlatIsAscending);\n\n      return notes.map(nameString).join(\"/\");\n    }\n  }\n}\n\nexport function nameString(note: NoteName): string {\n  return naturalString(natural(note)) + modificationString(modification(note));\n}\n\nexport function naturalString(nat: Natural): string {\n  return Natural[nat];\n}\n\nexport function modificationString(mod: Modification): string {\n  switch (mod) {\n    case Modification.None:\n      return \"\";\n    case Modification.Sharp:\n      return \"♯\";\n    case Modification.Flat:\n      return \"♭\";\n  }\n}\n\nexport function sharpOfNatural(nat: Natural): undefined | NoteName {\n  switch (nat) {\n    case Natural.A:\n      return NoteName.ASharp;\n    case Natural.B:\n      return undefined;\n    case Natural.C:\n      return NoteName.CSharp;\n    case Natural.D:\n      return NoteName.DSharp;\n    case Natural.E:\n      return undefined;\n    case Natural.F:\n      return NoteName.FSharp;\n    case Natural.G:\n      return NoteName.GSharp;\n  }\n}\n\nexport function flatOfNatural(nat: Natural): undefined | NoteName {\n  switch (nat) {\n    case Natural.A:\n      return NoteName.AFlat;\n    case Natural.B:\n      return NoteName.BFlat;\n    case Natural.C:\n      return undefined;\n    case Natural.D:\n      return NoteName.DFlat;\n    case Natural.E:\n      return NoteName.EFlat;\n    case Natural.F:\n      return undefined;\n    case Natural.G:\n      return NoteName.GFlat;\n  }\n}\n\nexport function naturalToNote(nat: Natural): NoteName {\n  switch (nat) {\n    case Natural.A:\n      return NoteName.A;\n    case Natural.B:\n      return NoteName.B;\n    case Natural.C:\n      return NoteName.C;\n    case Natural.D:\n      return NoteName.D;\n    case Natural.E:\n      return NoteName.E;\n    case Natural.F:\n      return NoteName.F;\n    case Natural.G:\n      return NoteName.G;\n  }\n}\n\nexport function scoreSuchThatNatLtSharpLtFlat(note: NoteName): number {\n  switch (modification(note)) {\n    case Modification.None:\n      return 0;\n    case Modification.Sharp:\n      return 1;\n    case Modification.Flat:\n      return 2;\n  }\n}\n\nexport function isNotUndefined<T>(v: T | undefined): v is T {\n  if (v === undefined) {\n    return false;\n  } else {\n    return true;\n  }\n}\n\nexport function getRandomNote(\n  prev: Note[],\n  settings: Settings\n): undefined | Note {\n  const possibleNextNotes = getPossibleRandomNextNotes(prev, settings);\n  return randomElement(possibleNextNotes);\n}\n\nexport function getPossibleRandomNextNotes(\n  prev: Note[],\n  settings: Settings\n): Note[] {\n  let possible = ALL_NOTES.slice().filter(\n    (sample) =>\n      isLowerThanOrEqualTo(settings.minPitch, sample.pitch) &&\n      isLowerThanOrEqualTo(sample.pitch, settings.maxPitch)\n  );\n\n  if (settings.naturalsOnly) {\n    possible = possible.filter(\n      (sample) => modification(sample.name) === Modification.None\n    );\n  }\n\n  if (settings.allowRepeats) {\n    return possible;\n  }\n\n  return possible.filter(\n    (possibleSample) =>\n      !prev.some((prevSample) =>\n        areNotesEqualAccordingTo(\n          settings.equivalenceRelation,\n          possibleSample,\n          prevSample\n        )\n      )\n  );\n}\n\nfunction isLowerThanOrEqualTo(x: Pitch, y: Pitch): boolean {\n  return x <= y;\n}\n\nexport function randomElement<T>(arr: T[]): undefined | T {\n  if (arr.length === 0) {\n    return undefined;\n  } else {\n    return arr[Math.floor(Math.random() * arr.length)];\n  }\n}\n\nexport function areNotesEqualAccordingTo(\n  rel: NoteEquivalenceRelation,\n  a: Note,\n  b: Note\n): boolean {\n  const areOctavesEqualIfNeeded = rel.isOctaveSensitive\n    ? getOctave(a.pitch) === getOctave(b.pitch)\n    : true;\n  return (\n    areOctavesEqualIfNeeded &&\n    areNoteNamesEqualAccordingTo(rel.nameEqRel, a.name, b.name)\n  );\n}\n\nfunction areNoteNamesEqualAccordingTo(\n  rel: NoteNameEquivalenceRelation,\n  a: NoteName,\n  b: NoteName\n): boolean {\n  switch (rel) {\n    case NoteNameEquivalenceRelation.Reflexive:\n      return a === b;\n    case NoteNameEquivalenceRelation.ByPitch:\n      return a === b || a === alternativeName(b);\n    case NoteNameEquivalenceRelation.ByLetter:\n      return natural(a) === natural(b);\n  }\n}\n\nexport function getNotationWithLetters(\n  samples: Note[],\n  settings: Settings\n): string {\n  return getNotation(samples, settings, true);\n}\n\nexport function getNotationWithoutLetters(\n  samples: Note[],\n  settings: Settings\n): string {\n  return getNotation(samples, settings, false);\n}\n\nfunction getNotation(\n  notes: Note[],\n  settings: Settings,\n  displayLetters: boolean\n): string {\n  const lettersNotationOrEmptyString = displayLetters\n    ? notes\n        .map((note) => {\n          const nameNotation = nameStrings(\n            note.name,\n            settings.equivalenceRelation.nameEqRel,\n            settings.displayEquivalentNoteNames\n          );\n          const octaveNotation = settings.displayOctave\n            ? getOctave(note.pitch)\n            : \"\";\n          return nameNotation + octaveNotation;\n        })\n        .join(\" \")\n    : \"\";\n  return `\nX: 1\nM: 4/4\nL: 1/4\n%%staves {(V1 V2)}\nV: V1 clef=treble-8\nV: V2 clef=treble-8\n[V: V1] ${noteAbcNotation({\n    pitch: settings.maxPitch,\n    name: pitchToNoteNames(settings.maxPitch)[0],\n  })}4 | ${insertXEveryN(\n    () => \"|\",\n    4,\n    notes.map((sample) => noteAbcNotation(sample))\n  ).join(\" \")} |]\nw:~Range ${lettersNotationOrEmptyString}\n[V: V2] ${noteAbcNotation({\n    pitch: settings.minPitch,\n    name: pitchToNoteNames(settings.minPitch)[0],\n  })}4 |]\n`;\n}\n\nfunction insertXEveryN<T>(f: () => T, n: number, src: readonly T[]): T[] {\n  const out = [];\n  for (let i = 0; i < src.length; ++i) {\n    if (i !== 0 && i % n === 0) {\n      out.push(f());\n    }\n    out.push(src[i]);\n  }\n  return out;\n}\n\nfunction noteAbcNotation(note: Note): string {\n  return noteNameAbcNotation(note.name) + pitchAbcNotation(note.pitch);\n}\n\nfunction noteNameAbcNotation(name: NoteName): string {\n  switch (name) {\n    case NoteName.A:\n      return \"A\";\n    case NoteName.ASharp:\n      return \"^A\";\n    case NoteName.BFlat:\n      return \"_B\";\n    case NoteName.B:\n      return \"B\";\n    case NoteName.C:\n      return \"C\";\n    case NoteName.CSharp:\n      return \"^C\";\n    case NoteName.DFlat:\n      return \"_D\";\n    case NoteName.D:\n      return \"D\";\n    case NoteName.DSharp:\n      return \"^D\";\n    case NoteName.EFlat:\n      return \"_E\";\n    case NoteName.E:\n      return \"E\";\n    case NoteName.F:\n      return \"F\";\n    case NoteName.FSharp:\n      return \"^F\";\n    case NoteName.GFlat:\n      return \"_G\";\n    case NoteName.G:\n      return \"G\";\n    case NoteName.GSharp:\n      return \"^G\";\n    case NoteName.AFlat:\n      return \"_A\";\n  }\n}\n\nfunction pitchAbcNotation(pitch: Pitch): string {\n  switch (getOctave(pitch)) {\n    case 2:\n      return \",\";\n    case 3:\n      return \"\";\n    case 4:\n      return \"'\";\n    case 5:\n      return \"''\";\n    case 6:\n      return \"'''\";\n  }\n}\n\nexport function getOctave(pitch: Pitch): 2 | 3 | 4 | 5 | 6 {\n  switch (pitch) {\n    case Pitch.E2:\n      return 2;\n    case Pitch.F2:\n      return 2;\n    case Pitch.FG2:\n      return 2;\n    case Pitch.G2:\n      return 2;\n    case Pitch.GA2:\n      return 2;\n    case Pitch.A2:\n      return 2;\n    case Pitch.AB2:\n      return 2;\n    case Pitch.B2:\n      return 2;\n    case Pitch.C3:\n      return 3;\n    case Pitch.CD3:\n      return 3;\n    case Pitch.D3:\n      return 3;\n    case Pitch.DE3:\n      return 3;\n    case Pitch.E3:\n      return 3;\n    case Pitch.F3:\n      return 3;\n    case Pitch.FG3:\n      return 3;\n    case Pitch.G3:\n      return 3;\n    case Pitch.GA3:\n      return 3;\n    case Pitch.A3:\n      return 3;\n    case Pitch.AB3:\n      return 3;\n    case Pitch.B3:\n      return 3;\n    case Pitch.C4:\n      return 4;\n    case Pitch.CD4:\n      return 4;\n    case Pitch.D4:\n      return 4;\n    case Pitch.DE4:\n      return 4;\n    case Pitch.E4:\n      return 4;\n    case Pitch.F4:\n      return 4;\n    case Pitch.FG4:\n      return 4;\n    case Pitch.G4:\n      return 4;\n    case Pitch.GA4:\n      return 4;\n    case Pitch.A4:\n      return 4;\n    case Pitch.AB4:\n      return 4;\n    case Pitch.B4:\n      return 4;\n    case Pitch.C5:\n      return 5;\n    case Pitch.CD5:\n      return 5;\n    case Pitch.D5:\n      return 5;\n    case Pitch.DE5:\n      return 5;\n    case Pitch.E5:\n      return 5;\n    case Pitch.F5:\n      return 5;\n    case Pitch.FG5:\n      return 5;\n    case Pitch.G5:\n      return 5;\n    case Pitch.GA5:\n      return 5;\n    case Pitch.A5:\n      return 5;\n    case Pitch.AB5:\n      return 5;\n    case Pitch.B5:\n      return 5;\n    case Pitch.C6:\n      return 6;\n    case Pitch.CD6:\n      return 6;\n    case Pitch.D6:\n      return 6;\n    case Pitch.DE6:\n      return 6;\n    case Pitch.E6:\n      return 6;\n  }\n}\n","import { DEFAULT_SETTINGS, Note, Settings } from \"./businessLogic\";\nimport {\n  deserializeNoteHistory,\n  deserializeSettings,\n  serializeNoteHistory,\n  serializeSettings,\n} from \"./serde\";\n\nenum LocalStorageKey {\n  Settings = \"RandNote.Settings\",\n  NoteHistory = \"RandNote.NoteHistory\",\n}\n\nexport function loadSettings(): Settings {\n  const s = localStorage.getItem(LocalStorageKey.Settings);\n  if (s === null) {\n    return DEFAULT_SETTINGS;\n  }\n\n  const possiblyUndefinedSettings = deserializeSettings(s);\n  if (possiblyUndefinedSettings !== undefined) {\n    return possiblyUndefinedSettings;\n  } else {\n    return DEFAULT_SETTINGS;\n  }\n}\n\nexport function saveSettings(settings: Settings) {\n  localStorage.setItem(LocalStorageKey.Settings, serializeSettings(settings));\n}\n\nexport function loadNoteHistory(): Note[] {\n  const s = localStorage.getItem(LocalStorageKey.NoteHistory);\n  if (s === null) {\n    return [];\n  }\n\n  const possiblyUndefinedNoteHistory = deserializeNoteHistory(s);\n  if (possiblyUndefinedNoteHistory !== undefined) {\n    return possiblyUndefinedNoteHistory;\n  } else {\n    return [];\n  }\n}\n\nexport function saveNoteHistory(history: Note[]) {\n  localStorage.setItem(\n    LocalStorageKey.NoteHistory,\n    serializeNoteHistory(history)\n  );\n}\n","import {\n  NoteEquivalenceRelation,\n  NoteName,\n  Note,\n  Pitch,\n  Settings,\n  NoteDisplayStyle,\n  NoteNameEquivalenceRelation,\n} from \"./businessLogic\";\n\nexport function deserializeSettings(s: string): undefined | Settings {\n  try {\n    const parsed = JSON.parse(s);\n    if (isValidSettings(parsed)) {\n      return parsed;\n    }\n  } catch {}\n\n  return undefined;\n}\n\nfunction isValidSettings(x: unknown): x is Settings {\n  return (\n    \"object\" === typeof x &&\n    x !== null &&\n    \"boolean\" === typeof (x as Settings).naturalsOnly &&\n    \"boolean\" === typeof (x as Settings).allowRepeats &&\n    isValidEquivalenceRelation((x as Settings).equivalenceRelation) &&\n    \"boolean\" === typeof (x as Settings).displayEquivalentNoteNames &&\n    \"boolean\" === typeof (x as Settings).displayOctave &&\n    \"number\" === typeof (x as Settings).sampleDisplayStyle &&\n    (x as Settings).sampleDisplayStyle in NoteDisplayStyle &&\n    \"number\" === typeof (x as Settings).minPitch &&\n    (x as Settings).minPitch in Pitch &&\n    \"number\" === typeof (x as Settings).maxPitch &&\n    (x as Settings).maxPitch in Pitch\n  );\n}\n\nfunction isValidEquivalenceRelation(x: unknown): x is NoteEquivalenceRelation {\n  return (\n    \"object\" === typeof x &&\n    x !== null &&\n    \"boolean\" === typeof (x as NoteEquivalenceRelation).isOctaveSensitive &&\n    \"number\" === typeof (x as NoteEquivalenceRelation).nameEqRel &&\n    (x as NoteEquivalenceRelation).nameEqRel in NoteNameEquivalenceRelation\n  );\n}\n\nexport function serializeSettings(settings: Settings): string {\n  return JSON.stringify(settings);\n}\n\nexport function deserializeNoteHistory(s: string): undefined | Note[] {\n  try {\n    const parsed = JSON.parse(s);\n    if (isValidSampleList(parsed)) {\n      return parsed;\n    }\n  } catch {}\n\n  return undefined;\n}\n\nfunction isValidSampleList(x: unknown): x is Note[] {\n  return Array.isArray(x) && x.every(isSample);\n}\n\nfunction isSample(x: unknown): x is Note {\n  return (\n    \"object\" === typeof x &&\n    x !== null &&\n    isNote((x as Note).name) &&\n    isPitch((x as Note).pitch)\n  );\n}\n\nfunction isNote(x: unknown): x is NoteName {\n  return \"string\" === typeof NoteName[x as NoteName];\n}\n\nfunction isPitch(x: unknown): x is Pitch {\n  return \"string\" === typeof Pitch[x as Pitch];\n}\n\nexport function serializeNoteHistory(notes: Note[]): string {\n  return JSON.stringify(notes);\n}\n","import React from \"react\";\nimport \"./BorderedFittedSection.css\";\n\nexport function BorderedFittedSection({\n  children,\n}: BorderedFittedSectionProps): React.ReactElement {\n  return (\n    <section className=\"BorderedSection BorderedSection--fitted\">\n      <div className=\"FittedContainer\">{children}</div>\n    </section>\n  );\n}\n\nexport interface BorderedFittedSectionProps {\n  children: React.ReactNode;\n}\n","import React from \"react\";\nimport \"./IndentedSection.css\";\n\nexport function IndentedSection({\n  children,\n}: IndentedSectionProps): React.ReactElement {\n  return <section className=\"IndentedSection\">{children}</section>;\n}\n\nexport interface IndentedSectionProps {\n  children: React.ReactNode;\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport {\n  State,\n  NoteName,\n  getPossibleRandomNextNotes,\n  nameStrings,\n  getRandomNote,\n  Settings,\n  NoteDisplayStyle,\n  getNotationWithLetters,\n  getNotationWithoutLetters,\n  Pitch,\n  pitchToNoteNames,\n  nameString,\n  getOctave,\n  NoteNameEquivalenceRelation,\n} from \"./businessLogic\";\nimport {\n  loadSettings,\n  loadNoteHistory,\n  saveSettings,\n  saveNoteHistory,\n} from \"./persistentState\";\nimport { Notation } from \"react-abc\";\nimport { BorderedFittedSection } from \"./components/BorderedFittedSection\";\nimport { IndentedSection } from \"./components/IndentedSection\";\n\nexport default class App extends React.Component<{}, State> {\n  constructor(props: {}) {\n    super(props);\n\n    this.state = {\n      isSettingsOpen: false,\n      settings: loadSettings(),\n      history: loadNoteHistory(),\n    };\n\n    this.bindMethods();\n  }\n\n  bindMethods() {\n    this.onCloseSettingsClick = this.onCloseSettingsClick.bind(this);\n    this.onNaturalsOnlyChange = this.onNaturalsOnlyChange.bind(this);\n    this.onAllowRepeatsChange = this.onAllowRepeatsChange.bind(this);\n    this.onNoteDisplayStyleChange = this.onNoteDisplayStyleChange.bind(this);\n    this.onEqRelIsOctaveSensitiveChange =\n      this.onEqRelIsOctaveSensitiveChange.bind(this);\n    this.onEqRelNameEqRelChange = this.onEqRelNameEqRelChange.bind(this);\n    this.onDisplayEquivalentNoteNamesChange =\n      this.onDisplayEquivalentNoteNamesChange.bind(this);\n    this.onDisplayOctaveChange = this.onDisplayOctaveChange.bind(this);\n    this.onMinPitchChange = this.onMinPitchChange.bind(this);\n    this.onMaxPitchChange = this.onMaxPitchChange.bind(this);\n\n    this.onOpenSettingsClick = this.onOpenSettingsClick.bind(this);\n    this.onClearHistoryClick = this.onClearHistoryClick.bind(this);\n    this.onNoteScreenClick = this.onNoteScreenClick.bind(this);\n  }\n\n  render() {\n    if (this.state.isSettingsOpen) {\n      return this.renderSettingsPage();\n    } else {\n      return this.renderNotePage();\n    }\n  }\n\n  renderSettingsPage(): React.ReactElement {\n    return (\n      <div className=\"App\">\n        <section>\n          <button onClick={this.onCloseSettingsClick}>Close</button>\n        </section>\n        <section className=\"Settings\">\n          <label className=\"Setting Setting--checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={this.state.settings.naturalsOnly}\n              onChange={this.onNaturalsOnlyChange}\n            />\n            Naturals only\n          </label>\n          <label className=\"Setting Setting--checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={this.state.settings.allowRepeats}\n              onChange={this.onAllowRepeatsChange}\n            />\n            Allow repeats\n          </label>\n          <label className=\"Setting Setting--checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={this.state.settings.displayEquivalentNoteNames}\n              onChange={this.onDisplayEquivalentNoteNamesChange}\n            />\n            Display equivalent note names\n          </label>\n          <label className=\"Setting Setting--checkbox\">\n            <input\n              type=\"checkbox\"\n              checked={this.state.settings.displayOctave}\n              onChange={this.onDisplayOctaveChange}\n            />\n            Display octave\n          </label>\n          <BorderedFittedSection>\n            <label>Display style</label>\n            <select\n              className=\"Dropdown__Input\"\n              value={this.state.settings.sampleDisplayStyle}\n              onChange={this.onNoteDisplayStyleChange}\n            >\n              <option value={NoteDisplayStyle.Letters}>Letters</option>\n              <option value={NoteDisplayStyle.Staff}>Staff</option>\n              <option value={NoteDisplayStyle.StaffAndLetters}>\n                Staff and letters\n              </option>\n            </select>\n          </BorderedFittedSection>\n          <BorderedFittedSection>\n            <header>Note equivalence</header>\n            <IndentedSection>\n              <BorderedFittedSection>\n                <label className=\"Setting Setting--checkbox Setting--no-top-margin\">\n                  <input\n                    type=\"checkbox\"\n                    checked={\n                      this.state.settings.equivalenceRelation.isOctaveSensitive\n                    }\n                    onChange={this.onEqRelIsOctaveSensitiveChange}\n                  />\n                  Octave sensitive\n                </label>\n              </BorderedFittedSection>\n              <BorderedFittedSection>\n                <label>Note name equivalence</label>\n                <select\n                  className=\"Dropdown__Input\"\n                  value={this.state.settings.equivalenceRelation.nameEqRel}\n                  onChange={this.onEqRelNameEqRelChange}\n                >\n                  <option value={NoteNameEquivalenceRelation.Reflexive}>\n                    By name\n                  </option>\n                  <option value={NoteNameEquivalenceRelation.ByPitch}>\n                    By pitch\n                  </option>\n                  <option value={NoteNameEquivalenceRelation.ByLetter}>\n                    By letter\n                  </option>\n                </select>\n              </BorderedFittedSection>\n            </IndentedSection>\n          </BorderedFittedSection>\n          <table className=\"SettingsTable\">\n            <tbody>\n              <tr>\n                <td>\n                  <span className=\"ForceNewline\">Lowest</span>\n                  <span className=\"ForceNewline\">pitch:</span>\n                </td>\n                <td>\n                  <input\n                    type=\"range\"\n                    min={Pitch.E2}\n                    max={Pitch.E6}\n                    value={this.state.settings.minPitch}\n                    onChange={this.onMinPitchChange}\n                  />\n                </td>\n                <td>\n                  {pitchToNoteNames(this.state.settings.minPitch)\n                    .map(nameString)\n                    .join(\"/\") + getOctave(this.state.settings.minPitch)}\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <span className=\"ForceNewline\">Highest</span>\n                  <span className=\"ForceNewline\">pitch:</span>\n                </td>\n                <td>\n                  <input\n                    type=\"range\"\n                    min={Pitch.E2}\n                    max={Pitch.E6}\n                    value={this.state.settings.maxPitch}\n                    onChange={this.onMaxPitchChange}\n                  />\n                </td>\n                <td>\n                  {pitchToNoteNames(this.state.settings.maxPitch)\n                    .map(nameString)\n                    .join(\"/\") + getOctave(this.state.settings.maxPitch)}\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </section>\n      </div>\n    );\n  }\n\n  onCloseSettingsClick(): void {\n    this.setState({ isSettingsOpen: false });\n  }\n\n  onNaturalsOnlyChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    this.updateSetting(\"naturalsOnly\", event.target.checked);\n  }\n\n  onAllowRepeatsChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    this.updateSetting(\"allowRepeats\", event.target.checked);\n  }\n\n  onNoteDisplayStyleChange(event: React.ChangeEvent<HTMLSelectElement>): void {\n    const n = parseInt(event.target.value, 10);\n    if (n in NoteDisplayStyle) {\n      this.updateSetting(\n        \"sampleDisplayStyle\",\n        n as unknown as NoteDisplayStyle\n      );\n    }\n  }\n\n  onEqRelIsOctaveSensitiveChange(\n    event: React.ChangeEvent<HTMLInputElement>\n  ): void {\n    this.setState((prevState) => {\n      const newSettings: Settings = {\n        ...prevState.settings,\n        equivalenceRelation: {\n          ...prevState.settings.equivalenceRelation,\n          isOctaveSensitive: event.target.checked,\n        },\n      };\n      saveSettings(newSettings);\n      return {\n        ...prevState,\n        settings: newSettings,\n      };\n    });\n  }\n\n  onEqRelNameEqRelChange(event: React.ChangeEvent<HTMLSelectElement>): void {\n    const n = parseInt(event.target.value, 10);\n    if (n in NoteNameEquivalenceRelation) {\n      this.setState((prevState) => {\n        const newSettings: Settings = {\n          ...prevState.settings,\n          equivalenceRelation: {\n            ...prevState.settings.equivalenceRelation,\n            nameEqRel: n,\n          },\n        };\n        saveSettings(newSettings);\n        return {\n          ...prevState,\n          settings: newSettings,\n        };\n      });\n    }\n  }\n\n  onDisplayEquivalentNoteNamesChange(\n    event: React.ChangeEvent<HTMLInputElement>\n  ): void {\n    this.updateSetting(\"displayEquivalentNoteNames\", event.target.checked);\n  }\n\n  onDisplayOctaveChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    this.updateSetting(\"displayOctave\", event.target.checked);\n  }\n\n  onMinPitchChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    const n = parseInt(event.target.value, 10);\n    if (n in Pitch && n <= this.state.settings.maxPitch) {\n      this.updateSetting(\"minPitch\", n);\n    } else {\n      event.preventDefault();\n    }\n  }\n\n  onMaxPitchChange(event: React.ChangeEvent<HTMLInputElement>): void {\n    const n = parseInt(event.target.value, 10);\n    if (n in Pitch && n >= this.state.settings.minPitch) {\n      this.updateSetting(\"maxPitch\", n);\n    } else {\n      event.preventDefault();\n    }\n  }\n\n  updateSetting<K extends keyof Settings>(\n    setting: K,\n    value: Settings[K]\n  ): void {\n    this.setState((prevState) => {\n      const newSettings = { ...prevState.settings, [setting]: value };\n      saveSettings(newSettings);\n      return {\n        ...prevState,\n        settings: newSettings,\n      };\n    });\n  }\n\n  renderNotePage(): React.ReactElement {\n    const currentNote: NoteName | undefined =\n      this.state.history[this.state.history.length - 1]?.name;\n    const {\n      equivalenceRelation,\n      displayEquivalentNoteNames: displayEquivalentNotes,\n    } = this.state.settings;\n\n    return (\n      <div\n        className={\n          \"App\" +\n          (getPossibleRandomNextNotes(this.state.history, this.state.settings)\n            .length === 0\n            ? \" LastNote\"\n            : \"\")\n        }\n        onClick={this.onNoteScreenClick}\n      >\n        <section>\n          <button onClick={this.onOpenSettingsClick}>Settings</button>\n          <button onClick={this.onClearHistoryClick}>Reset</button>\n        </section>\n        {this.state.settings.sampleDisplayStyle === NoteDisplayStyle.Letters ? (\n          <>\n            <section>\n              <h2>Current note</h2>\n              {currentNote !== undefined ? (\n                <div className=\"CurrentNote\">\n                  {nameStrings(\n                    currentNote,\n                    equivalenceRelation.nameEqRel,\n                    displayEquivalentNotes\n                  )}\n                </div>\n              ) : (\n                <div>Tap to generate</div>\n              )}\n            </section>\n            <section>\n              {this.state.history.map((sample, i) => (\n                <div className=\"HistoryNote\" key={i}>\n                  {nameStrings(\n                    sample.name,\n                    equivalenceRelation.nameEqRel,\n                    displayEquivalentNotes\n                  )}\n                </div>\n              ))}\n            </section>\n          </>\n        ) : (\n          <section>\n            <Notation\n              notation={\n                this.state.settings.sampleDisplayStyle ===\n                NoteDisplayStyle.StaffAndLetters\n                  ? getNotationWithLetters(\n                      this.state.history,\n                      this.state.settings\n                    )\n                  : getNotationWithoutLetters(\n                      this.state.history,\n                      this.state.settings\n                    )\n              }\n            />\n          </section>\n        )}\n      </div>\n    );\n  }\n\n  onOpenSettingsClick() {\n    this.setState({ isSettingsOpen: true });\n  }\n\n  onClearHistoryClick() {\n    this.setState({ history: [] });\n    saveNoteHistory([]);\n  }\n\n  onNoteScreenClick(event: React.MouseEvent) {\n    if (event.target instanceof HTMLButtonElement) {\n      return;\n    }\n\n    this.setState((prevState) => {\n      const sample = getRandomNote(prevState.history, prevState.settings);\n      const newHistory =\n        sample === undefined\n          ? prevState.history\n          : prevState.history.concat([sample]);\n      saveNoteHistory(newHistory);\n      return { ...prevState, history: newHistory };\n    });\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://cra.link/PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://cra.link/PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.');\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}