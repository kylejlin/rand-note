(this["webpackJsonprand-note"]=this["webpackJsonprand-note"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a,r=n(2),i=n.n(r),s=n(5),c=n.n(s),o=n(3),l=n(1),u=n(6),h=n(7),p=n(9),g=n(8);n(14);!function(e){e[e.ReflexiveOnly=0]="ReflexiveOnly",e[e.ByPitch=1]="ByPitch",e[e.ByLetter=2]="ByLetter"}(a||(a={}));var d,f={naturalsOnly:!0,allowRepeats:!1,equivalenceRelation:a.ReflexiveOnly,displayEquivalentNotes:!0};!function(e){e[e.A=0]="A",e[e.ASharp=1]="ASharp",e[e.BFlat=2]="BFlat",e[e.B=3]="B",e[e.C=4]="C",e[e.CSharp=5]="CSharp",e[e.DFlat=6]="DFlat",e[e.D=7]="D",e[e.DSharp=8]="DSharp",e[e.EFlat=9]="EFlat",e[e.E=10]="E",e[e.F=11]="F",e[e.FSharp=12]="FSharp",e[e.GFlat=13]="GFlat",e[e.G=14]="G",e[e.GSharp=15]="GSharp",e[e.AFlat=16]="AFlat"}(d||(d={}));var v,S=[d.A,d.ASharp,d.BFlat,d.B,d.C,d.CSharp,d.DFlat,d.D,d.DSharp,d.EFlat,d.E,d.F,d.FSharp,d.GFlat,d.G,d.GSharp,d.AFlat];!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G"}(v||(v={}));var y,C;v.A,v.B,v.C,v.D,v.E,v.F,v.G;function b(e){switch(e){case d.A:case d.ASharp:case d.AFlat:return v.A;case d.B:case d.BFlat:return v.B;case d.C:case d.CSharp:return v.C;case d.DFlat:case d.D:case d.DSharp:return v.D;case d.EFlat:case d.E:return v.E;case d.F:case d.FSharp:return v.F;case d.GFlat:case d.G:case d.GSharp:return v.G}}function F(e){switch(e){case d.A:case d.B:case d.C:case d.D:case d.E:case d.F:case d.G:return y.None;case d.ASharp:case d.CSharp:case d.DSharp:case d.FSharp:case d.GSharp:return y.Sharp;case d.AFlat:case d.BFlat:case d.DFlat:case d.EFlat:case d.GFlat:return y.Flat}}function j(e){switch(e){case d.AFlat:return d.GSharp;case d.ASharp:return d.BFlat;case d.BFlat:return d.ASharp;case d.CSharp:return d.DFlat;case d.DFlat:return d.CSharp;case d.DSharp:return d.EFlat;case d.EFlat:return d.DSharp;case d.FSharp:return d.GFlat;case d.GFlat:return d.FSharp;case d.GSharp:return d.AFlat;case d.A:case d.B:case d.C:case d.D:case d.E:case d.F:case d.G:return e}}function O(e,t,n){if(!n)return k(e);switch(t){case a.ReflexiveOnly:return k(e);case a.ByPitch:var r=j(e);return r===e?k(e):k(e)+"/"+k(r);case a.ByLetter:var i=b(e),s=function(e){switch(e){case v.A:return d.ASharp;case v.B:return;case v.C:return d.CSharp;case v.D:return d.DSharp;case v.E:return;case v.F:return d.FSharp;case v.G:return d.GSharp}}(i),c=function(e){switch(e){case v.A:return d.AFlat;case v.B:return d.BFlat;case v.C:return;case v.D:return d.DFlat;case v.E:return d.EFlat;case v.F:return;case v.G:return d.GFlat}}(i);return[N(i),s,c].filter(A).sort((function(t,n){return t===e?-1/0:n===e?1/0:w(t)-w(n)})).map(k).join("/")}}function k(e){return t=b(e),v[t]+function(e){switch(e){case y.None:return"";case y.Sharp:return"\u266f";case y.Flat:return"\u266d"}}(F(e));var t}function N(e){switch(e){case v.A:return d.A;case v.B:return d.B;case v.C:return d.C;case v.D:return d.D;case v.E:return d.E;case v.F:return d.F;case v.G:return d.G}}function w(e){switch(F(e)){case y.None:return 0;case y.Sharp:return 1;case y.Flat:return 2}}function A(e){return void 0!==e}function E(e,t){var n,a=x(e,t);return 0===(n=a).length?void 0:n[Math.floor(Math.random()*n.length)]}function x(e,t){var n=S.slice();return t.naturalsOnly&&(n=n.filter((function(e){return F(e)===y.None}))),t.allowRepeats?n:n.filter((function(n){return!e.some((function(e){return function(e,t,n){switch(e){case a.ReflexiveOnly:return t===n;case a.ByPitch:return t===n||t===j(n);case a.ByLetter:return b(t)===b(n)}}(t.equivalenceRelation,n,e)}))}))}function B(){var e,t=localStorage.getItem(C.Settings);if(null===t)return f;try{var n=JSON.parse(t);if("object"===typeof(e=n)&&null!==e&&"boolean"===typeof e.naturalsOnly&&"boolean"===typeof e.allowRepeats&&"number"===typeof e.equivalenceRelation&&e.equivalenceRelation in a&&"boolean"===typeof e.displayEquivalentNotes)return n}catch(r){}return f}function D(){var e,t=localStorage.getItem(C.NoteHistory);if(null===t)return[];try{var n=JSON.parse(t);if(e=n,Array.isArray(e)&&e.every(R))return n}catch(a){}return[]}function R(e){return"number"===typeof d[e]}function G(e){var t=JSON.stringify(e);localStorage.setItem(C.NoteHistory,t)}!function(e){e[e.None=0]="None",e[e.Sharp=1]="Sharp",e[e.Flat=2]="Flat"}(y||(y={})),function(e){e.Settings="RandNote.Settings",e.NoteHistory="RandNote.NoteHistory"}(C||(C={}));var m=n(0),q=function(e){Object(p.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isSettingsOpen:!1,settings:B(),history:D()},a.bindMethods(),a}return Object(h.a)(n,[{key:"bindMethods",value:function(){this.onCloseSettingsClick=this.onCloseSettingsClick.bind(this),this.onNaturalsOnlyChange=this.onNaturalsOnlyChange.bind(this),this.onAllowRepeatsChange=this.onAllowRepeatsChange.bind(this),this.onNoteEquivalenceRelationChange=this.onNoteEquivalenceRelationChange.bind(this),this.onDisplayEquivalentNotesChange=this.onDisplayEquivalentNotesChange.bind(this),this.onOpenSettingsClick=this.onOpenSettingsClick.bind(this),this.onClearHistoryClick=this.onClearHistoryClick.bind(this),this.onNoteScreenClick=this.onNoteScreenClick.bind(this)}},{key:"render",value:function(){return this.state.isSettingsOpen?this.renderSettingsPage():this.renderNotePage()}},{key:"renderSettingsPage",value:function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("section",{children:Object(m.jsx)("button",{onClick:this.onCloseSettingsClick,children:"Close"})}),Object(m.jsxs)("section",{className:"Settings",children:[Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsx)("input",{type:"checkbox",checked:this.state.settings.naturalsOnly,onChange:this.onNaturalsOnlyChange}),"Naturals only"]}),Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsx)("input",{type:"checkbox",checked:this.state.settings.allowRepeats,onChange:this.onAllowRepeatsChange}),"Allow repeats"]}),Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsx)("input",{type:"checkbox",checked:this.state.settings.displayEquivalentNotes,onChange:this.onDisplayEquivalentNotesChange}),"Display equivalent notes"]}),Object(m.jsxs)("label",{className:"Setting Setting--dropdown",children:["Note equivalence relation",Object(m.jsxs)("select",{value:this.state.settings.equivalenceRelation,onChange:this.onNoteEquivalenceRelationChange,children:[Object(m.jsx)("option",{value:a.ReflexiveOnly,children:"Reflexive only (default)"}),Object(m.jsx)("option",{value:a.ByPitch,children:"By pitch"}),Object(m.jsx)("option",{value:a.ByLetter,children:"By letter"})]})]})]})]})}},{key:"onCloseSettingsClick",value:function(){this.setState({isSettingsOpen:!1})}},{key:"onNaturalsOnlyChange",value:function(e){this.updateSetting("naturalsOnly",e.target.checked)}},{key:"onAllowRepeatsChange",value:function(e){this.updateSetting("allowRepeats",e.target.checked)}},{key:"onNoteEquivalenceRelationChange",value:function(e){var t=parseInt(e.target.value,10);t in a&&this.updateSetting("equivalenceRelation",t)}},{key:"onDisplayEquivalentNotesChange",value:function(e){this.updateSetting("displayEquivalentNotes",e.target.checked)}},{key:"updateSetting",value:function(e,t){this.setState((function(n){var a=Object(l.a)(Object(l.a)({},n.settings),{},Object(o.a)({},e,t));return function(e){var t=JSON.stringify(e);localStorage.setItem(C.Settings,t)}(a),Object(l.a)(Object(l.a)({},n),{},{settings:a})}))}},{key:"renderNotePage",value:function(){var e=this.state.history[this.state.history.length-1],t=this.state.settings,n=t.equivalenceRelation,a=t.displayEquivalentNotes;return Object(m.jsxs)("div",{className:"App"+(0===x(this.state.history,this.state.settings).length?" LastNote":""),onClick:this.onNoteScreenClick,children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("button",{onClick:this.onOpenSettingsClick,children:"Settings"}),Object(m.jsx)("button",{onClick:this.onClearHistoryClick,children:"Reset"})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("h2",{children:"Current note"}),void 0!==e?Object(m.jsx)("div",{className:"CurrentNote",children:O(e,n,a)}):Object(m.jsx)("div",{children:"Tap to generate"})]}),Object(m.jsx)("section",{children:this.state.history.map((function(e,t){return Object(m.jsx)("div",{className:"HistoryNote",children:O(e,n,a)},t)}))})]})}},{key:"onOpenSettingsClick",value:function(){this.setState({isSettingsOpen:!0})}},{key:"onClearHistoryClick",value:function(){this.setState({history:[]}),G([])}},{key:"onNoteScreenClick",value:function(e){e.target instanceof HTMLButtonElement||this.setState((function(e){var t=E(e.history,e.settings),n=void 0===t?e.history:e.history.concat([t]);return G(n),Object(l.a)(Object(l.a)({},e),{},{history:n})}))}}]),n}(i.a.Component),P=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(q,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");P?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):L(t,e)}))}}(),H()}},[[16,1,2]]]);
//# sourceMappingURL=main.af002fb3.chunk.js.map