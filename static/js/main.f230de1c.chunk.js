(this["webpackJsonprand-note"]=this["webpackJsonprand-note"]||[]).push([[0],{32:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a,r,s,c,i=n(7),o=n.n(i),l=n(22),u=n.n(l),h=n(11),p=n(5),f=n(23),d=n(24),y=n(27),S=n(26);n(32);function v(e){switch(e){case a.ByNameModuloOctave:return r.Reflexive;case a.ByPitchModuloOctave:return r.ByPitch;case a.ByLetter:return r.ByLetter;case a.ByPitch:return r.ByPitch;case a.ByNameAndPitch:return r.Reflexive}}!function(e){e[e.ByNameModuloOctave=0]="ByNameModuloOctave",e[e.ByPitchModuloOctave=1]="ByPitchModuloOctave",e[e.ByLetter=2]="ByLetter",e[e.ByPitch=3]="ByPitch",e[e.ByNameAndPitch=4]="ByNameAndPitch"}(a||(a={})),function(e){e[e.Reflexive=0]="Reflexive",e[e.ByPitch=1]="ByPitch",e[e.ByLetter=2]="ByLetter"}(r||(r={})),function(e){e[e.Letters=0]="Letters",e[e.Staff=1]="Staff",e[e.StaffAndLetters=2]="StaffAndLetters"}(s||(s={})),function(e){e[e.E2=0]="E2",e[e.F2=1]="F2",e[e.FG2=2]="FG2",e[e.G2=3]="G2",e[e.GA2=4]="GA2",e[e.A2=5]="A2",e[e.AB2=6]="AB2",e[e.B2=7]="B2",e[e.C3=8]="C3",e[e.CD3=9]="CD3",e[e.D3=10]="D3",e[e.DE3=11]="DE3",e[e.E3=12]="E3",e[e.F3=13]="F3",e[e.FG3=14]="FG3",e[e.G3=15]="G3",e[e.GA3=16]="GA3",e[e.A3=17]="A3",e[e.AB3=18]="AB3",e[e.B3=19]="B3",e[e.C4=20]="C4",e[e.CD4=21]="CD4",e[e.D4=22]="D4",e[e.DE4=23]="DE4",e[e.E4=24]="E4",e[e.F4=25]="F4",e[e.FG4=26]="FG4",e[e.G4=27]="G4",e[e.GA4=28]="GA4",e[e.A4=29]="A4",e[e.AB4=30]="AB4",e[e.B4=31]="B4",e[e.C5=32]="C5",e[e.CD5=33]="CD5",e[e.D5=34]="D5",e[e.DE5=35]="DE5",e[e.E5=36]="E5",e[e.F5=37]="F5",e[e.FG5=38]="FG5",e[e.G5=39]="G5",e[e.GA5=40]="GA5",e[e.A5=41]="A5",e[e.AB5=42]="AB5",e[e.B5=43]="B5",e[e.C6=44]="C6",e[e.CD6=45]="CD6",e[e.D6=46]="D6",e[e.DE6=47]="DE6",e[e.E6=48]="E6"}(c||(c={}));var F,A=[c.E2,c.F2,c.FG2,c.G2,c.GA2,c.A2,c.AB2,c.B2,c.C3,c.CD3,c.D3,c.DE3,c.E3,c.F3,c.FG3,c.G3,c.GA3,c.A3,c.AB3,c.B3,c.C4,c.CD4,c.D4,c.DE4,c.E4,c.F4,c.FG4,c.G4,c.GA4,c.A4,c.AB4,c.B4,c.C5,c.CD5,c.D5,c.DE5,c.E5,c.F5,c.FG5,c.G5,c.GA5,c.A5,c.AB5,c.B5,c.C6,c.CD6,c.D6,c.DE6,c.E6],C={naturalsOnly:!0,allowRepeats:!1,equivalenceRelation:a.ByNameModuloOctave,displayEquivalentNoteNames:!0,sampleDisplayStyle:s.StaffAndLetters,maxPitch:c.E5};!function(e){e[e.A=0]="A",e[e.ASharp=1]="ASharp",e[e.BFlat=2]="BFlat",e[e.B=3]="B",e[e.C=4]="C",e[e.CSharp=5]="CSharp",e[e.DFlat=6]="DFlat",e[e.D=7]="D",e[e.DSharp=8]="DSharp",e[e.EFlat=9]="EFlat",e[e.E=10]="E",e[e.F=11]="F",e[e.FSharp=12]="FSharp",e[e.GFlat=13]="GFlat",e[e.G=14]="G",e[e.GSharp=15]="GSharp",e[e.AFlat=16]="AFlat"}(F||(F={}));var g,D=function(e,t,n){for(var a=new Array(t.length*n.length),r=0,s=0;s<t.length;++s)for(var c=0;c<n.length;++c)a[r]=e(t[s],n[c]),++r;return a}((function(e,t){return{name:e,pitch:t}}),[F.A,F.ASharp,F.BFlat,F.B,F.C,F.CSharp,F.DFlat,F.D,F.DSharp,F.EFlat,F.E,F.F,F.FSharp,F.GFlat,F.G,F.GSharp,F.AFlat],A).filter((function(e){return function(e){switch(e){case c.E2:return[F.E];case c.F2:return[F.F];case c.FG2:return[F.FSharp,F.GFlat];case c.G2:return[F.G];case c.GA2:return[F.GSharp,F.AFlat];case c.A2:return[F.A];case c.AB2:return[F.ASharp,F.BFlat];case c.B2:return[F.B];case c.C3:return[F.C];case c.CD3:return[F.CSharp,F.DFlat];case c.D3:return[F.D];case c.DE3:return[F.DSharp,F.EFlat];case c.E3:return[F.E];case c.F3:return[F.F];case c.FG3:return[F.FSharp,F.GFlat];case c.G3:return[F.G];case c.GA3:return[F.GSharp,F.AFlat];case c.A3:return[F.A];case c.AB3:return[F.ASharp,F.BFlat];case c.B3:return[F.B];case c.C4:return[F.C];case c.CD4:return[F.CSharp,F.DFlat];case c.D4:return[F.D];case c.DE4:return[F.DSharp,F.EFlat];case c.E4:return[F.E];case c.F4:return[F.F];case c.FG4:return[F.FSharp,F.GFlat];case c.G4:return[F.G];case c.GA4:return[F.GSharp,F.AFlat];case c.A4:return[F.A];case c.AB4:return[F.ASharp,F.BFlat];case c.B4:return[F.B];case c.C5:return[F.C];case c.CD5:return[F.CSharp,F.DFlat];case c.D5:return[F.D];case c.DE5:return[F.DSharp,F.EFlat];case c.E5:return[F.E];case c.F5:return[F.F];case c.FG5:return[F.FSharp,F.GFlat];case c.G5:return[F.G];case c.GA5:return[F.GSharp,F.AFlat];case c.A5:return[F.A];case c.AB5:return[F.ASharp,F.BFlat];case c.B5:return[F.B];case c.C6:return[F.C];case c.CD6:return[F.CSharp,F.DFlat];case c.D6:return[F.D];case c.DE6:return[F.DSharp,F.EFlat];case c.E6:return[F.E]}}(e.pitch).includes(e.name)}));!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G"}(g||(g={}));var B,G;g.A,g.B,g.C,g.D,g.E,g.F,g.G;function E(e){switch(e){case F.A:case F.ASharp:case F.AFlat:return g.A;case F.B:case F.BFlat:return g.B;case F.C:case F.CSharp:return g.C;case F.DFlat:case F.D:case F.DSharp:return g.D;case F.EFlat:case F.E:return g.E;case F.F:case F.FSharp:return g.F;case F.GFlat:case F.G:case F.GSharp:return g.G}}function b(e){switch(e){case F.A:case F.B:case F.C:case F.D:case F.E:case F.F:case F.G:return B.None;case F.ASharp:case F.CSharp:case F.DSharp:case F.FSharp:case F.GSharp:return B.Sharp;case F.AFlat:case F.BFlat:case F.DFlat:case F.EFlat:case F.GFlat:return B.Flat}}function j(e){switch(e){case F.AFlat:return F.GSharp;case F.ASharp:return F.BFlat;case F.BFlat:return F.ASharp;case F.CSharp:return F.DFlat;case F.DFlat:return F.CSharp;case F.DSharp:return F.EFlat;case F.EFlat:return F.DSharp;case F.FSharp:return F.GFlat;case F.GFlat:return F.FSharp;case F.GSharp:return F.AFlat;case F.A:case F.B:case F.C:case F.D:case F.E:case F.F:case F.G:return e}}function m(e,t,n){if(!n)return O(e);switch(t){case r.Reflexive:return O(e);case r.ByPitch:var a=j(e);return a===e?O(e):O(e)+"/"+O(a);case r.ByLetter:var s=E(e),c=function(e){switch(e){case g.A:return F.ASharp;case g.B:return;case g.C:return F.CSharp;case g.D:return F.DSharp;case g.E:return;case g.F:return F.FSharp;case g.G:return F.GSharp}}(s),i=function(e){switch(e){case g.A:return F.AFlat;case g.B:return F.BFlat;case g.C:return;case g.D:return F.DFlat;case g.E:return F.EFlat;case g.F:return;case g.G:return F.GFlat}}(s);return[N(s),c,i].filter(w).sort((function(t,n){return t===e?-1/0:n===e?1/0:k(t)-k(n)})).map(O).join("/")}}function O(e){return t=E(e),g[t]+function(e){switch(e){case B.None:return"";case B.Sharp:return"\u266f";case B.Flat:return"\u266d"}}(b(e));var t}function N(e){switch(e){case g.A:return F.A;case g.B:return F.B;case g.C:return F.C;case g.D:return F.D;case g.E:return F.E;case g.F:return F.F;case g.G:return F.G}}function k(e){switch(b(e)){case B.None:return 0;case B.Sharp:return 1;case B.Flat:return 2}}function w(e){return void 0!==e}function x(e,t){var n,a=P(e,t);return 0===(n=a).length?void 0:n[Math.floor(Math.random()*n.length)]}function P(e,t){var n=D.slice().filter((function(e){return n=e.pitch,a=t.maxPitch,n<=a;var n,a}));return t.naturalsOnly&&(n=n.filter((function(e){return b(e.name)===B.None}))),t.allowRepeats?n:n.filter((function(n){return!e.some((function(e){return function(e,t,n){switch(e){case a.ByNameModuloOctave:return t.name===n.name;case a.ByPitchModuloOctave:return t.name===n.name||t.name===j(n.name);case a.ByLetter:return E(t.name)===E(n.name);case a.ByPitch:return t.pitch===n.pitch;case a.ByNameAndPitch:return t.name===n.name&&t.pitch===n.pitch}}(t.equivalenceRelation,n,e)}))}))}function L(e){return"\nX: 1\nM: 4/4\nL: 1/4\n%%staves {V1}\nV: V1 clef=treble\n[V: V1] ".concat(function(e,t,n){for(var a=[],r=0;r<n.length;++r)0!==r&&r%t===0&&a.push(e()),a.push(n[r]);return a}((function(){return"|"}),4,e.map((function(e){return function(e){switch(e){case F.A:return"A";case F.ASharp:return"^A";case F.BFlat:return"_B";case F.B:return"B";case F.C:return"C";case F.CSharp:return"^C";case F.DFlat:return"_D";case F.D:return"D";case F.DSharp:return"^D";case F.EFlat:return"_E";case F.E:return"E";case F.F:return"F";case F.FSharp:return"^F";case F.GFlat:return"_G";case F.G:return"G";case F.GSharp:return"^G";case F.AFlat:return"_A"}}((t=e).name)+function(e){switch(function(e){switch(e){case c.E2:case c.F2:case c.FG2:case c.G2:case c.GA2:case c.A2:case c.AB2:case c.B2:return 2;case c.C3:case c.CD3:case c.D3:case c.DE3:case c.E3:case c.F3:case c.FG3:case c.G3:case c.GA3:case c.A3:case c.AB3:case c.B3:return 3;case c.C4:case c.CD4:case c.D4:case c.DE4:case c.E4:case c.F4:case c.FG4:case c.G4:case c.GA4:case c.A4:case c.AB4:case c.B4:return 4;case c.C5:case c.CD5:case c.D5:case c.DE5:case c.E5:case c.F5:case c.FG5:case c.G5:case c.GA5:case c.A5:case c.AB5:case c.B5:return 5;case c.C6:case c.CD6:case c.D6:case c.DE6:case c.E6:return 6}}(e)){case 2:return",";case 3:return"";case 4:return"'";case 5:return"''";case 6:return"'''"}}(t.pitch);var t}))).join(" ")," |]\nw:1.~").concat(e.map((function(e){return O(e.name)})).join(" "),"\n")}function R(e){try{var t=JSON.parse(e);if("object"===typeof(n=t)&&null!==n&&"boolean"===typeof n.naturalsOnly&&"boolean"===typeof n.allowRepeats&&"number"===typeof n.equivalenceRelation&&n.equivalenceRelation in a&&"boolean"===typeof n.displayEquivalentNoteNames&&"number"===typeof n.sampleDisplayStyle&&n.sampleDisplayStyle in s&&"number"===typeof n.maxPitch&&n.maxPitch in c)return t}catch(r){}var n}function q(e){try{var t=JSON.parse(e);if(n=t,Array.isArray(n)&&n.every(M))return t}catch(a){}var n}function M(e){return"object"===typeof e&&null!==e&&function(e){return"string"===typeof F[e]}(e.name)&&function(e){return"string"===typeof c[e]}(e.pitch)}function H(){var e=localStorage.getItem(G.Settings);if(null===e)return C;var t=R(e);return void 0!==t?t:C}function V(e){localStorage.setItem(G.Settings,function(e){return JSON.stringify(e)}(e))}function _(){var e=localStorage.getItem(G.NoteHistory);if(null===e)return[];var t=q(e);return void 0!==t?t:[]}function I(e){var t;localStorage.setItem(G.NoteHistory,(t=e,JSON.stringify(t)))}!function(e){e[e.None=0]="None",e[e.Sharp=1]="Sharp",e[e.Flat=2]="Flat"}(B||(B={})),function(e){e.Settings="RandNote.Settings",e.NoteHistory="RandNote.NoteHistory"}(G||(G={}));var T=n(25),W=n(0),J=function(e){Object(y.a)(n,e);var t=Object(S.a)(n);function n(e){var a;return Object(f.a)(this,n),(a=t.call(this,e)).state={isSettingsOpen:!1,settings:H(),history:_()},a.bindMethods(),a}return Object(d.a)(n,[{key:"bindMethods",value:function(){this.onCloseSettingsClick=this.onCloseSettingsClick.bind(this),this.onNaturalsOnlyChange=this.onNaturalsOnlyChange.bind(this),this.onAllowRepeatsChange=this.onAllowRepeatsChange.bind(this),this.onNoteDisplayStyleChange=this.onNoteDisplayStyleChange.bind(this),this.onNoteEquivalenceRelationChange=this.onNoteEquivalenceRelationChange.bind(this),this.onDisplayEquivalentNoteNamesChange=this.onDisplayEquivalentNoteNamesChange.bind(this),this.onOpenSettingsClick=this.onOpenSettingsClick.bind(this),this.onClearHistoryClick=this.onClearHistoryClick.bind(this),this.onNoteScreenClick=this.onNoteScreenClick.bind(this)}},{key:"render",value:function(){return this.state.isSettingsOpen?this.renderSettingsPage():this.renderNotePage()}},{key:"renderSettingsPage",value:function(){var e=function(e){switch(e){case a.ByNameModuloOctave:case a.ByPitchModuloOctave:case a.ByLetter:return!1;case a.ByPitch:case a.ByNameAndPitch:return!0}}(this.state.settings.equivalenceRelation),t=function(e){switch(e){case s.Letters:return!1;case s.Staff:case s.StaffAndLetters:return!0}}(this.state.settings.sampleDisplayStyle);return Object(W.jsxs)("div",{className:"App",children:[Object(W.jsx)("section",{children:Object(W.jsx)("button",{onClick:this.onCloseSettingsClick,children:"Close"})}),Object(W.jsxs)("section",{className:"Settings",children:[Object(W.jsxs)("label",{className:"Setting",children:[Object(W.jsx)("input",{type:"checkbox",checked:this.state.settings.naturalsOnly,onChange:this.onNaturalsOnlyChange}),"Naturals only"]}),Object(W.jsxs)("label",{className:"Setting",children:[Object(W.jsx)("input",{type:"checkbox",checked:this.state.settings.allowRepeats,onChange:this.onAllowRepeatsChange}),"Allow repeats"]}),Object(W.jsxs)("label",{className:"Setting",children:[Object(W.jsx)("input",{type:"checkbox",checked:this.state.settings.displayEquivalentNoteNames,onChange:this.onDisplayEquivalentNoteNamesChange}),"Display equivalent notes"]}),Object(W.jsxs)("label",{className:"Setting Setting--dropdown",children:["Display style",Object(W.jsxs)("select",{value:this.state.settings.sampleDisplayStyle,onChange:this.onNoteDisplayStyleChange,children:[Object(W.jsx)("option",{value:s.Letters,disabled:e,children:"Letters"}),Object(W.jsx)("option",{value:s.Staff,children:"Staff"}),Object(W.jsx)("option",{value:s.StaffAndLetters,children:"Staff and letters"})]}),e&&Object(W.jsx)("p",{children:"(To enable the first option, set your equivalence relation to any non-octave-sensitive relation)"})]}),Object(W.jsxs)("label",{className:"Setting Setting--dropdown",children:["Sample equivalence relation",Object(W.jsxs)("select",{value:this.state.settings.equivalenceRelation,onChange:this.onNoteEquivalenceRelationChange,children:[Object(W.jsx)("option",{value:a.ByNameModuloOctave,children:"By name modulo octave (default)"}),Object(W.jsx)("option",{value:a.ByPitchModuloOctave,children:"By pitch modulo octave"}),Object(W.jsx)("option",{value:a.ByLetter,children:"By letter"}),Object(W.jsx)("option",{value:a.ByPitch,disabled:!t,children:"By pitch (octave sensitive)"}),Object(W.jsx)("option",{value:a.ByNameAndPitch,disabled:!t,children:"Reflexive (i.e., by pitch and name, octave sensitive)"})]}),!t&&Object(W.jsx)("p",{children:'(To enable the last two options, set your Display Style to "Staff" or "Staff and Letters")'})]})]})]})}},{key:"onCloseSettingsClick",value:function(){this.setState({isSettingsOpen:!1})}},{key:"onNaturalsOnlyChange",value:function(e){this.updateSetting("naturalsOnly",e.target.checked)}},{key:"onAllowRepeatsChange",value:function(e){this.updateSetting("allowRepeats",e.target.checked)}},{key:"onNoteDisplayStyleChange",value:function(e){var t=parseInt(e.target.value,10);t in s&&this.updateSetting("sampleDisplayStyle",t)}},{key:"onNoteEquivalenceRelationChange",value:function(e){var t=parseInt(e.target.value,10);t in a&&this.updateSetting("equivalenceRelation",t)}},{key:"onDisplayEquivalentNoteNamesChange",value:function(e){this.updateSetting("displayEquivalentNoteNames",e.target.checked)}},{key:"updateSetting",value:function(e,t){this.setState((function(n){var a=Object(p.a)(Object(p.a)({},n.settings),{},Object(h.a)({},e,t));return V(a),Object(p.a)(Object(p.a)({},n),{},{settings:a})}))}},{key:"renderNotePage",value:function(){var e,t=null===(e=this.state.history[this.state.history.length-1])||void 0===e?void 0:e.name,n=this.state.settings,a=n.equivalenceRelation,r=n.displayEquivalentNoteNames;return Object(W.jsxs)("div",{className:"App"+(0===P(this.state.history,this.state.settings).length?" LastNote":""),onClick:this.onNoteScreenClick,children:[Object(W.jsxs)("section",{children:[Object(W.jsx)("button",{onClick:this.onOpenSettingsClick,children:"Settings"}),Object(W.jsx)("button",{onClick:this.onClearHistoryClick,children:"Reset"})]}),this.state.settings.sampleDisplayStyle===s.Letters?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("section",{children:[Object(W.jsx)("h2",{children:"Current note"}),void 0!==t?Object(W.jsx)("div",{className:"CurrentNote",children:m(t,v(a),r)}):Object(W.jsx)("div",{children:"Tap to generate"})]}),Object(W.jsx)("section",{children:this.state.history.map((function(e,t){return Object(W.jsx)("div",{className:"HistoryNote",children:m(e.name,v(a),r)},t)}))})]}):Object(W.jsx)("section",{children:Object(W.jsx)(T.Notation,{notation:this.state.settings.sampleDisplayStyle===s.StaffAndLetters?L(this.state.history):(this.state.history,"\nX: 1\nM: 4/4\nL: 1/4\n%%staves {V1}\nV: V1 clef=treble\n[V: V1] (d3 _B =B_A =A2 | _A2 _B=B G2) (cB | d8)        |]\n")})})]})}},{key:"onOpenSettingsClick",value:function(){this.setState({isSettingsOpen:!0})}},{key:"onClearHistoryClick",value:function(){this.setState({history:[]}),I([])}},{key:"onNoteScreenClick",value:function(e){e.target instanceof HTMLButtonElement||this.setState((function(e){var t=x(e.history,e.settings),n=void 0===t?e.history:e.history.concat([t]);return I(n),Object(p.a)(Object(p.a)({},e),{},{history:n})}))}}]),n}(o.a.Component),U=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function X(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var $=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,84)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};u.a.render(Object(W.jsx)(o.a.StrictMode,{children:Object(W.jsx)(J,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");U?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):X(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):X(t,e)}))}}(),$()}},[[83,1,2]]]);
//# sourceMappingURL=main.f230de1c.chunk.js.map