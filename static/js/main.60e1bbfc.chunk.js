(this["webpackJsonprand-note"]=this["webpackJsonprand-note"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a,r=n(2),i=n.n(r),s=n(5),c=n.n(s),o=n(3),l=n(1),u=n(6),h=n(7),p=n(9),f=n(8);n(14);!function(e){e[e.ReflexiveOnly=0]="ReflexiveOnly",e[e.ByPitch=1]="ByPitch",e[e.ByLetter=2]="ByLetter"}(a||(a={}));var g,S={naturalsOnly:!0,allowRepeats:!1,equivalenceRelation:a.ReflexiveOnly};!function(e){e[e.A=0]="A",e[e.ASharp=1]="ASharp",e[e.BFlat=2]="BFlat",e[e.B=3]="B",e[e.C=4]="C",e[e.CSharp=5]="CSharp",e[e.DFlat=6]="DFlat",e[e.D=7]="D",e[e.DSharp=8]="DSharp",e[e.EFlat=9]="EFlat",e[e.E=10]="E",e[e.F=11]="F",e[e.FSharp=12]="FSharp",e[e.GFlat=13]="GFlat",e[e.G=14]="G",e[e.GSharp=15]="GSharp",e[e.AFlat=16]="AFlat"}(g||(g={}));var d,v=[g.A,g.ASharp,g.BFlat,g.B,g.C,g.CSharp,g.DFlat,g.D,g.DSharp,g.EFlat,g.E,g.F,g.FSharp,g.GFlat,g.G,g.GSharp,g.AFlat];!function(e){e[e.A=0]="A",e[e.B=1]="B",e[e.C=2]="C",e[e.D=3]="D",e[e.E=4]="E",e[e.F=5]="F",e[e.G=6]="G"}(d||(d={}));var y,C;d.A,d.B,d.C,d.D,d.E,d.F,d.G;function F(e){switch(e){case g.A:case g.ASharp:case g.AFlat:return d.A;case g.B:case g.BFlat:return d.B;case g.C:case g.CSharp:return d.C;case g.DFlat:case g.D:case g.DSharp:return d.D;case g.EFlat:case g.E:return d.E;case g.F:case g.FSharp:return d.F;case g.GFlat:case g.G:case g.GSharp:return d.G}}function b(e){switch(e){case g.A:case g.B:case g.C:case g.D:case g.E:case g.F:case g.G:return y.None;case g.ASharp:case g.CSharp:case g.DSharp:case g.FSharp:case g.GSharp:return y.Sharp;case g.AFlat:case g.BFlat:case g.DFlat:case g.EFlat:case g.GFlat:return y.Flat}}function j(e){switch(e){case g.AFlat:return g.GSharp;case g.ASharp:return g.BFlat;case g.BFlat:return g.ASharp;case g.CSharp:return g.DFlat;case g.DFlat:return g.CSharp;case g.DSharp:return g.EFlat;case g.EFlat:return g.DSharp;case g.FSharp:return g.GFlat;case g.GFlat:return g.FSharp;case g.GSharp:return g.AFlat;case g.A:case g.B:case g.C:case g.D:case g.E:case g.F:case g.G:return e}}function O(e,t){switch(t){case a.ReflexiveOnly:return k(e);case a.ByPitch:var n=j(e);return n===e?k(e):k(e)+"/"+k(n);case a.ByLetter:var r=F(e),i=function(e){switch(e){case d.A:return g.ASharp;case d.B:return;case d.C:return g.CSharp;case d.D:return g.DSharp;case d.E:return;case d.F:return g.FSharp;case d.G:return g.GSharp}}(r),s=function(e){switch(e){case d.A:return g.AFlat;case d.B:return g.BFlat;case d.C:return;case d.D:return g.DFlat;case d.E:return g.EFlat;case d.F:return;case d.G:return g.GFlat}}(r);return[N(r),i,s].filter(A).sort((function(t,n){return t===e?-1/0:n===e?1/0:w(t)-w(n)})).map(k).join("/")}}function k(e){return t=F(e),d[t]+function(e){switch(e){case y.None:return"";case y.Sharp:return"\u266f";case y.Flat:return"\u266d"}}(b(e));var t}function N(e){switch(e){case d.A:return g.A;case d.B:return g.B;case d.C:return g.C;case d.D:return g.D;case d.E:return g.E;case d.F:return g.F;case d.G:return g.G}}function w(e){switch(b(e)){case y.None:return 0;case y.Sharp:return 1;case y.Flat:return 2}}function A(e){return void 0!==e}function B(e,t){var n,a=x(e,t);return 0===(n=a).length?void 0:n[Math.floor(Math.random()*n.length)]}function x(e,t){var n=v.slice();return t.naturalsOnly&&(n=n.filter((function(e){return b(e)===y.None}))),t.allowRepeats?n:n.filter((function(n){return!e.some((function(e){return function(e,t,n){switch(e){case a.ReflexiveOnly:return t===n;case a.ByPitch:return t===n||t===j(n);case a.ByLetter:return F(t)===F(n)}}(t.equivalenceRelation,n,e)}))}))}function D(){var e,t=localStorage.getItem(C.Settings);if(null===t)return S;try{var n=JSON.parse(t);if("object"===typeof(e=n)&&null!==e&&"boolean"===typeof e.naturalsOnly&&"boolean"===typeof e.allowRepeats&&"number"===typeof e.equivalenceRelation&&e.equivalenceRelation in a)return n}catch(r){}return S}function R(){var e,t=localStorage.getItem(C.NoteHistory);if(null===t)return[];try{var n=JSON.parse(t);if(e=n,Array.isArray(e)&&e.every(E))return n}catch(a){}return[]}function E(e){return"number"===typeof g[e]}function G(e){var t=JSON.stringify(e);localStorage.setItem(C.NoteHistory,t)}!function(e){e[e.None=0]="None",e[e.Sharp=1]="Sharp",e[e.Flat=2]="Flat"}(y||(y={})),function(e){e.Settings="RandNote.Settings",e.NoteHistory="RandNote.NoteHistory"}(C||(C={}));var m=n(0),P=function(e){Object(p.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={isSettingsOpen:!1,settings:D(),history:R()},a.bindMethods(),a}return Object(h.a)(n,[{key:"bindMethods",value:function(){this.onCloseSettingsClick=this.onCloseSettingsClick.bind(this),this.onNaturalsOnlyChange=this.onNaturalsOnlyChange.bind(this),this.onAllowRepeatsChange=this.onAllowRepeatsChange.bind(this),this.onNoteEquivalenceRelationChange=this.onNoteEquivalenceRelationChange.bind(this),this.onOpenSettingsClick=this.onOpenSettingsClick.bind(this),this.onClearHistoryClick=this.onClearHistoryClick.bind(this),this.onNoteScreenClick=this.onNoteScreenClick.bind(this)}},{key:"render",value:function(){return this.state.isSettingsOpen?this.renderSettingsPage():this.renderNotePage()}},{key:"renderSettingsPage",value:function(){return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("section",{children:Object(m.jsx)("button",{onClick:this.onCloseSettingsClick,children:"Close"})}),Object(m.jsxs)("section",{className:"Settings",children:[Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsx)("input",{type:"checkbox",checked:this.state.settings.naturalsOnly,onChange:this.onNaturalsOnlyChange}),"Naturals only"]}),Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsx)("input",{type:"checkbox",checked:this.state.settings.allowRepeats,onChange:this.onAllowRepeatsChange}),"Allow repeats"]}),Object(m.jsxs)("label",{className:"Setting",children:[Object(m.jsxs)("select",{value:this.state.settings.equivalenceRelation,onChange:this.onNoteEquivalenceRelationChange,children:[Object(m.jsx)("option",{value:a.ReflexiveOnly,children:"Reflexive only"}),Object(m.jsx)("option",{value:a.ByPitch,children:"By pitch"}),Object(m.jsx)("option",{value:a.ByLetter,children:"By letter"})]}),"Note equivalence relation"]})]})]})}},{key:"onCloseSettingsClick",value:function(){this.setState({isSettingsOpen:!1})}},{key:"onNaturalsOnlyChange",value:function(e){this.updateSetting("naturalsOnly",e.target.checked)}},{key:"onAllowRepeatsChange",value:function(e){this.updateSetting("allowRepeats",e.target.checked)}},{key:"onNoteEquivalenceRelationChange",value:function(e){var t=parseInt(e.target.value,10);t in a&&this.updateSetting("equivalenceRelation",t)}},{key:"updateSetting",value:function(e,t){this.setState((function(n){var a=Object(l.a)(Object(l.a)({},n.settings),{},Object(o.a)({},e,t));return function(e){var t=JSON.stringify(e);localStorage.setItem(C.Settings,t)}(a),Object(l.a)(Object(l.a)({},n),{},{settings:a})}))}},{key:"renderNotePage",value:function(){var e=this.state.history[this.state.history.length-1],t=this.state.settings.equivalenceRelation;return Object(m.jsxs)("div",{className:"App"+(0===x(this.state.history,this.state.settings).length?" LastNote":""),onClick:this.onNoteScreenClick,children:[Object(m.jsxs)("section",{children:[Object(m.jsx)("button",{onClick:this.onOpenSettingsClick,children:"Settings"}),Object(m.jsx)("button",{onClick:this.onClearHistoryClick,children:"Reset"})]}),Object(m.jsxs)("section",{children:[Object(m.jsx)("h2",{children:"Current note"}),void 0!==e?Object(m.jsx)("div",{className:"CurrentNote",children:O(e,t)}):Object(m.jsx)("div",{children:"Tap to generate"})]}),Object(m.jsx)("section",{children:this.state.history.map((function(e,n){return Object(m.jsx)("div",{className:"HistoryNote",children:O(e,t)},n)}))})]})}},{key:"onOpenSettingsClick",value:function(){this.setState({isSettingsOpen:!0})}},{key:"onClearHistoryClick",value:function(){this.setState({history:[]}),G([])}},{key:"onNoteScreenClick",value:function(e){e.target instanceof HTMLButtonElement||this.setState((function(e){var t=B(e.history,e.settings),n=void 0===t?e.history:e.history.concat([t]);return G(n),Object(l.a)(Object(l.a)({},e),{},{history:n})}))}}]),n}(i.a.Component),q=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function L(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),i(e),s(e)}))};c.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");q?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):L(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):L(t,e)}))}}(),H()}},[[16,1,2]]]);
//# sourceMappingURL=main.60e1bbfc.chunk.js.map